"""日本語プロンプトテンプレート - 四層フレームワーク"""

# 第1層：設定層 (World Building & Lore)
WORLD_BUILDING_PROMPT = """あなたは専門的な世界観構築者です。ユーザーの要件に基づいて、完全で一貫性のある世界設定の基礎を構築してください。

ユーザーの要件：
{user_input}

以下の構造化された内容を出力してください：

## 1. 世界観の基礎
- 物理的規則（魔法、科学技術レベルなど）
- 社会体系（政治制度、組織構造）
- 地理的環境（主要地域、重要な場所）

## 2. キャラクターのメタデータ（主要人物）
各主要キャラクターについて：
- 名前、年齢、外見的特徴
- 基本的な性格の核心（3-5のキーワード）
- 核心能力/スキル
- 背景設定（出身、重要な経験）

## 3. 種族/職業システム（該当する場合）
- 種族の特徴と設定
- 職業体系とレベル
- 能力体系とバランス

## 4. 長期変数と制約
- 物語が従わなければならない規則
- 出現が許可されない設定
- 一貫性を保つ必要がある要素

構造化され、明確な形式で出力してください。これは後続のすべての層の「基盤」および一貫性チェックの基準として機能します。
"""

# 第2層：物語層 (Plot & Character Arc)
STORY_LAYER_PROMPT = """あなたは専門的なプロット構築者です。構築された世界設定に基づいて、完全な物語の骨格とキャラクターアークを設計してください。

世界設定：
{world_setting}

ユーザーの要件：
{user_input}

以下を出力してください：

## 1. 核心テーマとメインプロット
- 物語の核心テーマ
- 主要な対立線
- 物語の基本的な調性（軽快/深刻/サスペンスなど）

## 2. プロット概要（プロットポイント）
物語を主要段階（例：開始、展開、転換点、クライマックス、結末）に分け、各段階に以下を含めてください：
- 主要なイベント
- 重要な転換点
- 伏線の設定
- 感情的なリズム

## 3. キャラクターアーク
各主要キャラクターについて設計：
- 開始状態（性格、能力、目標）
- 成長軌跡（重要な転換点）
- 最終状態（物語を経験した後の変化）
- 行動パターンの変化段階

## 4. 興味深さと呼応の設計
- フックポイント（読者を引きつける重要なシーン）
- 伏線と呼応の設計（主要な伏線とその呼応位置をリストアップ）
- サスペンスの設定

キャラクターアークは動的であることを確保し、キャラクターの行動パターンは異なる段階で経験に基づいてシフトするようにしてください。
"""

# 第3層：シーン層 (Scene Decomposition)
SCENE_DECOMPOSITION_PROMPT = """あなたは専門的なシーン分解者です。物語の概要を実行可能な具体的なシーンユニットに分解してください。

世界設定：
{world_setting}

物語の概要：
{story_outline}

物語を具体的なシーンに分解してください。各シーンに以下を含めてください：

## シーンリスト（順番に）
各シーンについて出力：

### シーン [番号]：[シーン名]
- **場所**：具体的な位置
- **人物**：登場するキャラクター
- **目標**：シーンの核心目標（キャラクターが達成したいこと）
- **対立**：シーン内の対立/矛盾
- **感情的基調**：シーンの雰囲気
- **前後のシーンとの接続**：どのように前後を繋ぐか
- **重要な会話/行動**：必ず出現する要素
- **伏線呼応**：このシーンに関わる伏線や呼応

各シーンが独立した最小の物語単位であることを確保し、全体の枠組みに影響を与えることなく局所的な修正をサポートしてください。
シーンの分解は詳細に行ってください。例えば「街に入る」は「城門に到着」->「検査を受ける」->「城内に入る」などの複数のシーンに分解できます。
"""

# 第4層：文字層 (Textualization)
TEXTUALIZATION_PROMPT = """あなたは優れた文体を持つ専門的な小説家です。すべての前段階層の情報に基づいて、シーンを美しい文学的テキストにレンダリングしてください。

世界設定：
{world_setting}

物語の背景：
{story_context}

現在のシーン記述：
{scene_description}

キャラクターの履歴/状態：
{character_context}

上記のシーンを小説テキストとしてレンダリングしてください。要件：

1. **文体要件**
   - 流暢で優雅な言語、シーンの感情的基調に一致
   - 自然で生き生きとした会話、キャラクターの性格に一致
   - 詳細な環境描写、雰囲気を作り出す

2. **一貫性チェック**
   - 世界設定の規則を厳密に遵守
   - キャラクターの行動が現在の段階のキャラクターアークと一致
   - 以前のシーンとの連続性を維持

3. **詳細要件**
   - キャラクターの微妙な表情、行動に注意
   - 詳細を通じてキャラクターの心理を示す
   - 五感の描写を活用して没入感を高める

4. **構造要件**
   - シーンの開始には明確なシーン感が必要
   - シーンの終了には適切な転換やサスペンスが必要
   - 文字数は約800-1500文字（シーンの複雑さに応じて調整）

追加の説明やコメントなしで、シーンの完全なテキストコンテンツを直接出力してください。
"""
